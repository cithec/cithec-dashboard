<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Agendar Cita - CITHEC</title>
  <link rel="stylesheet" href="assets/style.css" />
</head>
<body>
<div style="
  background-color: #1d4ed8;
  padding: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-family: sans-serif;
">
  <div style="display: flex; gap: 1rem;">
    <a href="index.html" class="nav-link">🏠 Inicio</a>
    <a href="agendar.html" class="nav-link">🗓️ Agendar</a>
    <a href="pacientes.html" class="nav-link">👥 Pacientes</a>
    <a href="citas.html" class="nav-link">📋 Citas</a>
  </div>
  <span style="color:white; font-weight:bold;">CITHEC</span>
</div>
<script>
  const current = location.pathname.split('/').pop();
  document.querySelectorAll('.nav-link').forEach(link => {
    if (link.getAttribute('href') === current) {
      link.style.backgroundColor = 'white';
      link.style.color = '#1d4ed8';
      link.style.padding = '0.3rem 0.6rem';
      link.style.borderRadius = '4px';
    } else {
      link.style.color = 'white';
    }
  });
</script>
<div style="
  background-color: #1d4ed8;
  padding: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-family: sans-serif;
">
  <div style="display: flex; gap: 1rem;">
    <a href="index.html" style="color: white; text-decoration: none; font-weight: bold;">🏠 Inicio</a>
    <a href="agendar.html" style="color: white; text-decoration: none; font-weight: bold;">🗓️ Agendar</a>
    <a href="pacientes.html" style="color: white; text-decoration: none; font-weight: bold;">👥 Pacientes</a>
    <a href="citas.html" style="color: white; text-decoration: none; font-weight: bold;">📋 Citas</a>
  </div>
  <span style="color:white; font-weight:bold;">CITHEC</span>
</div>
<div style="
  background-color: #1d4ed8;
  padding: 1rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-family: sans-serif;
">
  <span style="color:white; font-weight:bold; font-size:1.2rem;">CITHEC</span>
  <a href="agendar.html" style="
    background-color: white;
    color: #1d4ed8;
    padding: 0.5rem 1rem;
    text-decoration: none;
    border-radius: 4px;
    font-weight: bold;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  ">🗓️ Agendar Cita</a>
</div>
  <div class="container">
    <h1>Agendar Cita</h1>
    <form id="citaForm">
      <input type="text" name="rut" placeholder="RUT del paciente" required />
      <input type="date" name="fecha" required />
      <input type="time" name="hora" required />
      <button type="submit">Agendar</button>
    </form>
    <div id="mensaje"></div>
  </div>
  <script>
    document.getElementById('citaForm').addEventListener('submit', function (e) {
      e.preventDefault();
      const form = e.target;
      const data = {
        rut: form.rut.value,
        fecha: form.fecha.value,
        hora: form.hora.value
      };

      fetch('https://script.google.com/macros/s/AKfycbxeGYIEyOBy5Eg4aHhOtA8uh__shG-KhiT706YLqiHUSv7K4sLLI8ijWNSGT1jgLBkakQ/exec', {
        method: 'POST',
        body: JSON.stringify(data),
        headers: { 'Content-Type': 'application/json' }
      })
      .then(res => res.text())
      .then(msg => {
        document.getElementById('mensaje').innerText = msg;
        form.reset();
      })
      .catch(err => {
        document.getElementById('mensaje').innerText = 'Error al enviar datos';
        console.error(err);
      });
    });
  </script>
</body>
</html>